---
layout: page_en
title: more
---

<div class="show">

  <img src="/images/photos/street/bruxelles/L1115717.jpg" />
  <img src="/images/photos/street/bruxelles/L1115719.jpg" />
  <img src="/images/photos/street/bruxelles/L1115721-2.jpg" />
  <img src="/images/photos/street/bruxelles/L1115722.jpg" />
  <img src="/images/photos/street/bruxelles/L1115733.jpg" />
  <img src="/images/photos/street/bruxelles/L1115734.jpg" />
  <img src="/images/photos/street/bruxelles/L1115739.jpg" />

  <img src="/images/photos/street/tokyo/L9053380-2.jpg" />
  <img src="/images/photos/street/tokyo/L9053387.jpg" />
  <img src="/images/photos/street/tokyo/L9997656.jpg" />
  <img src="/images/photos/street/tokyo/L9997667.jpg" />
  <img src="/images/photos/street/tokyo/L9997799-2.jpg" />
</div>

<script src="//ajax.googleapis.com/ajax/libs/jquery/1.11.0/jquery.min.js">
</script>
<script>
  $(document).ready(function() {

    // TODO: package that in a library

    var $show = $('.show');
    var $window = $(window);

    $show.append('<div class="thumbs"></div>');
    $thumbs = $show.find('.thumbs');
    $show.find('img').each(function(i, e) {
      var src = $(e).prop('src');
      $thumbs.append('<img src="' + src + '" />');
    });

    var show = function($img) {

      if ($img.length < 1) return;

      var src = $img.prop('src');
      $show.css('height', '' + ($window.height() - $('.header').height()) + 'px'); // TODO: nuke, that, set 100% height via css!
      $show.css('background', 'url(' + src + ') no-repeat center center fixed');
      $show.css('background-position', '50% 70%');
      $show.css('background-size', 'auto 80%');

      $thumbs.find('img').removeClass('selected');
      $img.addClass('selected');
      var $i = $img.prev();
      if ($i.length < 1) $i = $img;
      $thumbs.css('top', '-' + $i[0].offsetTop + 'px');
      var $last = $thumbs.find('img:last');
      var wh = $window.height();
      var bottom = $last.offset().top + $last.height();
      if (bottom < wh) {
        $thumbs.css('top', '-' + ($thumbs.height() - wh + $last.height() + 14) + 'px');
      }
    };
    show($('.thumbs > img:first'));

    $(window).on('keyup', function(ev) {
      var kc = ev.keyCode;
      var $sel = $('.thumbs > img.selected');
      if (kc === 74 || kc === 40) show($sel.next());
      else if (kc === 75 || kc === 38) show($sel.prev());
      else if (kc === 72) show($('.thumbs > img:first'));
      else if (kc === 76) show($('.thumbs > img:last'));
    });
    $thumbs.find('img').on('click', function(ev) {
      show($(ev.target));
    });
  });
</script>

