var TgMenu=function(){this.init=function(){var b=window.location.href.match(/\/en\/([^\.\/]+)/)[1];$('a.item[data-cat="'+b+'"]').addClass("selected");$(".header > .left").on("click",function(a){window.location.href="/en/index.html"});$("a[data-cat]").on("click",function(a){a=$(a.target).attr("data-cat");window.location.href="/en/"+a+".html"})};return this}.apply({});var TgHeads=function(){this.selectHead=function(b){if(!(1>b.length)){var a=b.closest(".heads"),e=b.closest(".head-slide");e.find(".head").removeClass("selected");b.addClass("selected");var d=b.attr("data-tg-head");$(".show[data-tg-head]").hide();d=$('.show[data-tg-head="'+d+'"]');d.show();d.find("img.selected").click();e.css("left","0px");var d=a.width(),c=b.offset().left,h=b.width();e.css("left",d/2-c-h/2+"px");if((a=a.attr("data-tg-bm"))&&window.localStorage)try{localStorage[a+".heads"]=b.find("img").attr("src")}catch(l){}}};
this.initHeads=function(b){b.css("opacity","0.0");b.append('<div class="head-slide"></div>');$slide=b.find(".head-slide");b.find(".head").each(function(d,a){$slide.append(a)});b.find(".head").on("click",function(d){TgHeads.selectHead($(d.target).closest(".head"))});var a=b.attr("data-tg-bm");if(a&&window.localStorage)try{TgHeads.selectHead(b.find('img[src="'+localStorage[a+".heads"]+'"]').closest(".head"))}catch(e){}1>b.find(".head.selected").length&&TgHeads.selectHead(b.find(".head:first"));b.fadeTo(200,
1)};this.init=function(){$(".show[data-tg-head]").hide();$("div.heads").each(function(a,e){TgHeads.initHeads($(e))});var b=function(){$("div.heads").each(function(a,e){TgHeads.selectHead($(e).find(".head:first"))})};$(window).on("keyup",function(a){a=a.keyCode;var e=$(".head.selected");37===a||72===a?TgHeads.selectHead(e.prev()):39===a||76===a?TgHeads.selectHead(e.next()):83===a&&b()})};return this}.apply({});var TgShow=function(){var b=this;this.zoom=function(a){$(".zoom").is(":visible")?$(".zoom").remove():1>a.length||(window.scrollTo(0,0),a=a.filter(":visible"),a=a.attr("src"),$("body").append('<div class="zoom"><img src="'+a+'" /></div>'),a=$(window),$(".zoom").css("width",a.width()+"px"),$(".zoom").css("height",a.height()+"px"),$(".zoom > img").on("click",function(){$(".zoom").remove()}))};this.show=function(a,e){if(!(1>a.length)){var d=a.closest(".show");if(e||d.is(":visible")){var c=d.find(".thumbs"),
b=$(window).height(),l=a.attr("src"),f=d.offset().top,g=b-f,f=500<g?500:g;d.css("height",""+g+"px");d.children("img").css({height:""+f+"px","margin-top":""+(g-f)/2+"px"});d.children("img, .text").each(function(d,a){var c=$(a);c.css("display",(c.attr("data-src")||c.attr("src"))===l?"block":"none")});c.find("img").removeClass("selected");a.addClass("selected");f=a.prev();1>f.length&&(f=a);c.css("top","-"+f[0].offsetTop+"px");f=c.find("img:last");f.offset().top+f.height()<b&&(b=function(){c.css("top",
"-"+(c.height()-g)+"px")},b(),window.setTimeout(b,1400));if((b=d.attr("data-tg-bm")||d.parent().attr("data-tg-bm"))&&window.localStorage){f=d.attr("data-tg-head");try{localStorage[f+"/"+b+".show"]=a.attr("src")}catch(k){}}var d=d.find(".location"),m=1;c.children().each(function(a,d){$(d).is(".selected")&&(m=a+1)});d.text(""+m+"/"+c.children().length)}}};this.initShow=function(a){a.css("opacity","0.0");a.append('<div class="thumbs"></div>');var b=a.find(".thumbs");a.children("img, .text").each(function(a,
d){var c=$(d),c=c.attr("data-src")||c.attr("src");b.append('<img src="'+c+'" />')});a.is(".text")||a.append('<div class="location">0/0</div>');a.on("click",function(d){var a=$(d.target);if(a.hasClass("show")){var c=a.find(".thumbs > img.selected"),b=a.width()/2,e=a.height()/10;d.offsetY<e?TgShow.show(a.find(".thumbs > img:first")):d.offsetY>9*e?TgShow.show(a.find(".thumbs > img:last")):d.offsetX>b?TgShow.show(c.next()):TgShow.show(c.prev())}});b.find("img").on("click",function(a){TgShow.show($(a.target))});
var d=a.attr("data-tg-bm")||a.parent().attr("data-tg-bm");if(d&&window.localStorage)try{var c=a.attr("data-tg-head");TgShow.show(b.find('img[src="'+localStorage[c+"/"+d+".show"]+'"]'))}catch(h){}1>b.find(".selected").length&&TgShow.show(b.find("img:first"));a.fadeTo(300,1)};this.init=function(){var a=$(".show");a.each(function(a,c){b.initShow($(c))});a.children("img").each(function(a,c){$(c).css("cursor","pointer")});a.children("img").on("click",function(a){b.zoom($(a.target))});var e=function(a,
c,b){a.each(function(a,d){var e=$(d),k=null;"next"===c?k=e.next():"prev"===c?k=e.prev():"first"===c?k=e.closest(".thumbs").find("img:first"):"last"===c&&(k=e.closest(".thumbs").find("img:last"));TgShow.show(k,b)})};$(window).on("keyup",function(a){a=a.keyCode;var c=$(".thumbs > img.selected");74===a||40===a?e(c,"next"):75===a||38===a?e(c,"prev"):33===a?e(c,"first"):34===a?e(c,"last"):83===a?e(c,"first",!0):32===a&&b.zoom(c)});$(".zoomable").on("click",function(a){b.zoom($(a.target))})};return this}.apply({});var Cart=function(){var b={l:{en:"large",ja:"ooki",format:"30cm x 20cm",price:7500},s:{en:"small",ja:"chiisai",format:"10cm x 7cm",price:1500}},a=function(a){$(a.target)},e=function(c){c=$(c.target);if(!c.hasClass("horizontally-flipped")){c.addClass("horizontally-flipped");c.removeAttr("title");var d=c.parent();d.addClass("wide");d.css("margin-left","-"+d.outerWidth()/2+"px");for(var d=c.attr("data-tg-data"),e=d.length-1;0<=e;e--){var f=b[d[e]];if(f){var g=$('<span class="purchase-format"></span>');
g.attr("title","click to add to the cart");c.after(g);g.append('<i class="fa fa-picture-o"></i>');g.append(f.en);g.attr("data-tg-format",d[e]);g.on("click",a)}}}},d=function(){$("img").each(function(a,d){var b=d.src.match(/_(S)([a-zA-Z0-9]*)\.jpe?g$/i);if(b&&"S"===b[1]){var f=$(d);if(!f.closest(".slideshow")[0]){b=b[2];f.before('<div class="sale"></div>');var g=f.prev(".sale");g.append('<div class="sheet"></div>');g.append(f);g=g.find(".sheet");g.css("left","50%");g.css("width",""+f.width()+"px");
g.css("margin-left","-"+f.width()/2+"px");g.append('<div class="controls"></div>');f=g.find(".controls");f.css("margin-left","-"+f.outerWidth()/2+"px");f.append('<i class="fa fa-shopping-cart" />');f=f.find(".fa-shopping-cart");f.attr("title","order a print of this picture");f.attr("data-tg-data",b);f.on("click",e)}}})};this.init=function(){d()};return this}.apply({});var Tg=function(){var b=this,a=function(){var a=$("div.slideshow");a.find("img:first").show();a.append('<div class="sheet"></div>');a.find(".sheet").append('<div class="controls"></div>');a=a.find(".controls");a.append('<i class="fa fa-step-backward" />');a.append('<i class="fa fa-pause" />');a.append('<i class="fa fa-play" />');a.append('<i class="fa fa-step-forward" />');a.css("margin-left","-"+a.outerWidth()/2+"px");$(".controls > .fa-play").hide();$(".controls > .fa-pause").on("click",function(a){a=
$(a.target).closest(".slideshow");a.find(".fa-play").show();a.find(".fa-pause").hide()});$(".controls > .fa-play").on("click",function(a){a=$(a.target).closest(".slideshow");a.find(".fa-play").hide();a.find(".fa-pause").show()});$(".controls > .fa-step-backward, .controls > .fa-step-forward").on("click",function(a){a=$(a.target);var c=a.closest(".slideshow");if(!c.hasClass("sliding")){var c=c.find("img:visible"),b=null,b=a.hasClass("fa-step-forward")?c.next("img"):c.prev("img");b[0]&&(c.hide(),b.show())}});
window.setTimeout(b.nextSlide,3E3)};this.nextSlide=function(){$("div.slideshow").addClass("sliding");$("div.slideshow").find("img:visible").each(function(a,b){var c=$(b),h=c.closest(".slideshow");h.find(".fa-play").is(":visible")?h.removeClass("sliding"):c.fadeOut(1100,function(){var a=c.next("img");a[0]||(a=c.parent().find("img:first"));a.fadeIn(700,function(){h.removeClass("sliding")})})});window.setTimeout(b.nextSlide,5E3)};this.init=function(){a()};return this}.apply({});
