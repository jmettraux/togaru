var TgShow=function(){var g=this;this.show=function(c){if(!(1>c.length)){$show=c.closest(".show");var b=$show.find(".thumbs"),a=$(window).height(),d=c.prop("src");$show.css("height",""+(a-$(".header").height())+"px");$show.css("background","url("+d+") no-repeat center center fixed");$show.css("background-position","50% 70%");$show.css("background-size","auto 80%");b.find("img").removeClass("selected");c.addClass("selected");d=c.prev();1>d.length&&(d=c);b.css("top","-"+d[0].offsetTop+"px");c=b.find("img:last");
c.offset().top+c.height()<a&&b.css("top","-"+(b.height()-a+c.height()+14)+"px")}};this.initShow=function(c){c.append('<div class="thumbs"></div>');var b=c.find(".thumbs");c.find("img").each(function(a,d){b.append('<img src="'+$(d).prop("src")+'" />')});TgShow.show(c.find(".thumbs > img:first"));c.on("click",function(a){var d=$(a.target);if(d.hasClass("show")){var b=$(".thumbs > img.selected"),c=$(window),e=c.width()/2,c=c.height()/10;a.offsetY<c?TgShow.show(d.find(".thumbs > img:first")):a.offsetY>
9*c?TgShow.show(d.find(".thumbs > img:last")):a.offsetX>e?TgShow.show(b.next()):TgShow.show(b.prev())}});b.find("img").on("click",function(a){TgShow.show($(a.target))})};this.init=function(){$(".show").each(function(c,b){g.initShow($(b))})};return this}.apply({});var Cart=function(){var g={l:{en:"large",ja:"ooki",format:"30cm x 20cm",price:7500},s:{en:"small",ja:"chiisai",format:"10cm x 7cm",price:1500}},c=function(d){$(d.target)},b=function(d){d=$(d.target);if(!d.hasClass("horizontally-flipped")){d.addClass("horizontally-flipped");d.removeAttr("title");var a=d.parent();a.addClass("wide");a.css("margin-left","-"+a.outerWidth()/2+"px");for(var a=d.attr("data-tg-data"),b=a.length-1;0<=b;b--){var e=g[a[b]];if(e){var f=$('<span class="purchase-format"></span>');
f.attr("title","click to add to the cart");d.after(f);f.append('<i class="fa fa-picture-o"></i>');f.append(e.en);f.attr("data-tg-format",a[b]);f.on("click",c)}}}},a=function(){$("img").each(function(a,c){var h=c.src.match(/_(S)([a-zA-Z0-9]*)\.jpe?g$/i);if(h&&"S"===h[1]){var e=$(c);if(!e.closest(".slideshow")[0]){h=h[2];e.before('<div class="sale"></div>');var f=e.prev(".sale");f.append('<div class="sheet"></div>');f.append(e);f=f.find(".sheet");f.css("left","50%");f.css("width",""+e.width()+"px");
f.css("margin-left","-"+e.width()/2+"px");f.append('<div class="controls"></div>');e=f.find(".controls");e.css("margin-left","-"+e.outerWidth()/2+"px");e.append('<i class="fa fa-shopping-cart" />');e=e.find(".fa-shopping-cart");e.attr("title","order a print of this picture");e.attr("data-tg-data",h);e.on("click",b)}}})};this.init=function(){a()};return this}.apply({});var Tg=function(){var g=this,c=function(){var b=$("div.slideshow");b.find("img:first").show();b.append('<div class="sheet"></div>');b.find(".sheet").append('<div class="controls"></div>');b=b.find(".controls");b.append('<i class="fa fa-step-backward" />');b.append('<i class="fa fa-pause" />');b.append('<i class="fa fa-play" />');b.append('<i class="fa fa-step-forward" />');b.css("margin-left","-"+b.outerWidth()/2+"px");$(".controls > .fa-play").hide();$(".controls > .fa-pause").on("click",function(a){a=
$(a.target).closest(".slideshow");a.find(".fa-play").show();a.find(".fa-pause").hide()});$(".controls > .fa-play").on("click",function(a){a=$(a.target).closest(".slideshow");a.find(".fa-play").hide();a.find(".fa-pause").show()});$(".controls > .fa-step-backward, .controls > .fa-step-forward").on("click",function(a){a=$(a.target);var d=a.closest(".slideshow");if(!d.hasClass("sliding")){var d=d.find("img:visible"),b=null,b=a.hasClass("fa-step-forward")?d.next("img"):d.prev("img");b[0]&&(d.hide(),b.show())}});
window.setTimeout(g.nextSlide,3E3)};this.nextSlide=function(){$("div.slideshow").addClass("sliding");$("div.slideshow").find("img:visible").each(function(b,a){var d=$(a),c=d.closest(".slideshow");c.find(".fa-play").is(":visible")?c.removeClass("sliding"):d.fadeOut(1100,function(){var a=d.next("img");a[0]||(a=d.parent().find("img:first"));a.fadeIn(700,function(){c.removeClass("sliding")})})});window.setTimeout(g.nextSlide,5E3)};this.init=function(){c()};return this}.apply({});
