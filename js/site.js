var TgHeads=function(){this.selectHead=function(d){if(!(1>d.length)){var c=d.closest(".heads"),a=d.closest(".head-slide");a.find(".head").removeClass("selected");d.addClass("selected");var b=d.attr("data-tg-head");$(".show[data-tg-head]").hide();b=$('.show[data-tg-head="'+b+'"]');b.show();b.find("img.selected").click();a.css("left","0px");var b=c.width(),g=d.offset().left,k=d.width();a.css("left",b/2-g-k/2+"px");(c=c.attr("data-tg-bm"))&&window.localStorage&&(localStorage[c+".heads"]=d.find("img").attr("src"))}};
this.initHeads=function(d){d.append('<div class="head-slide"></div>');$slide=d.find(".head-slide");d.find(".head").each(function(a,b){$slide.append(b)});d.find(".head").on("click",function(a){TgHeads.selectHead($(a.target).closest(".head"))});var c=d.attr("data-tg-bm");c&&window.localStorage&&TgHeads.selectHead(d.find('img[src="'+localStorage[c+".heads"]+'"]').closest(".head"));1>d.find(".head.selected").length&&TgHeads.selectHead(d.find(".head:first"))};this.init=function(){$(".show[data-tg-head]").hide();
$("div.heads").each(function(c,a){TgHeads.initHeads($(a))});var d=function(){$("div.heads").each(function(c,a){TgHeads.selectHead($(a).find(".head:first"))})};$(window).on("keyup",function(c){c=c.keyCode;var a=$(".head.selected");37===c||72===c?TgHeads.selectHead(a.prev()):39===c||76===c?TgHeads.selectHead(a.next()):83===c&&d()})};return this}.apply({});var TgShow=function(){var d=this;this.show=function(c,a){if(!(1>c.length)&&($show=c.closest(".show"),a||$show.is(":visible"))){var b=$show.find(".thumbs"),g=$(window).height(),k=c.prop("src"),d=$show.offset().top;$show.css("height",""+(g-d-70)+"px");$show.children("img").each(function(b,a){a.src===k?$(a).css("display","block"):$(a).css("display","none")});b.find("img").removeClass("selected");c.addClass("selected");var e=c.prev();1>e.length&&(e=c);b.css("top","-"+e[0].offsetTop+"px");e=b.find("img:last");
e.offset().top+e.height()<g&&b.css("top","-"+(b.height()-g+d+e.height()-45)+"px");(b=$show.attr("data-tg-bm"))&&window.localStorage&&(g=$show.attr("data-tg-head"),localStorage[g+"/"+b+".show"]=c.attr("src"))}};this.initShow=function(c){c.append('<div class="thumbs"></div>');var a=c.find(".thumbs");c.find("img").each(function(b,c){a.append('<img src="'+$(c).prop("src")+'" />')});c.on("click",function(a){var b=$(a.target);if(b.hasClass("show")){var c=b.find(".thumbs > img.selected"),e=b.width()/2,d=
b.height()/10;a.offsetY<d?TgShow.show(b.find(".thumbs > img:first")):a.offsetY>9*d?TgShow.show(b.find(".thumbs > img:last")):a.offsetX>e?TgShow.show(c.next()):TgShow.show(c.prev())}});a.find("img").on("click",function(b){TgShow.show($(b.target))});var b=c.attr("data-tg-bm");b&&window.localStorage&&(c=c.attr("data-tg-head"),TgShow.show(a.find('img[src="'+localStorage[c+"/"+b+".show"]+'"]')));1>a.find(".selected").length&&TgShow.show(a.find("img:first"))};this.init=function(){$(".show").each(function(a,
b){d.initShow($(b))});var c=function(a,b,c){a.each(function(a,d){var e=$(d),f=null;"next"===b?f=e.next():"prev"===b?f=e.prev():"first"===b?f=e.closest(".thumbs").find("img:first"):"last"===b&&(f=e.closest(".thumbs").find("img:last"));TgShow.show(f,c)})};$(window).on("keyup",function(a){a=a.keyCode;var b=$(".thumbs > img.selected");74===a||40===a?c(b,"next"):75===a||38===a?c(b,"prev"):33===a?c(b,"first"):34===a?c(b,"last"):83===a&&c(b,"first",!0)})};return this}.apply({});var Cart=function(){var d={l:{en:"large",ja:"ooki",format:"30cm x 20cm",price:7500},s:{en:"small",ja:"chiisai",format:"10cm x 7cm",price:1500}},c=function(b){$(b.target)},a=function(b){b=$(b.target);if(!b.hasClass("horizontally-flipped")){b.addClass("horizontally-flipped");b.removeAttr("title");var a=b.parent();a.addClass("wide");a.css("margin-left","-"+a.outerWidth()/2+"px");for(var a=b.attr("data-tg-data"),h=a.length-1;0<=h;h--){var e=d[a[h]];if(e){var f=$('<span class="purchase-format"></span>');
f.attr("title","click to add to the cart");b.after(f);f.append('<i class="fa fa-picture-o"></i>');f.append(e.en);f.attr("data-tg-format",a[h]);f.on("click",c)}}}},b=function(){$("img").each(function(b,c){var d=c.src.match(/_(S)([a-zA-Z0-9]*)\.jpe?g$/i);if(d&&"S"===d[1]){var e=$(c);if(!e.closest(".slideshow")[0]){d=d[2];e.before('<div class="sale"></div>');var f=e.prev(".sale");f.append('<div class="sheet"></div>');f.append(e);f=f.find(".sheet");f.css("left","50%");f.css("width",""+e.width()+"px");
f.css("margin-left","-"+e.width()/2+"px");f.append('<div class="controls"></div>');e=f.find(".controls");e.css("margin-left","-"+e.outerWidth()/2+"px");e.append('<i class="fa fa-shopping-cart" />');e=e.find(".fa-shopping-cart");e.attr("title","order a print of this picture");e.attr("data-tg-data",d);e.on("click",a)}}})};this.init=function(){b()};return this}.apply({});var Tg=function(){var d=this,c=function(){var a=$("div.slideshow");a.find("img:first").show();a.append('<div class="sheet"></div>');a.find(".sheet").append('<div class="controls"></div>');a=a.find(".controls");a.append('<i class="fa fa-step-backward" />');a.append('<i class="fa fa-pause" />');a.append('<i class="fa fa-play" />');a.append('<i class="fa fa-step-forward" />');a.css("margin-left","-"+a.outerWidth()/2+"px");$(".controls > .fa-play").hide();$(".controls > .fa-pause").on("click",function(b){b=
$(b.target).closest(".slideshow");b.find(".fa-play").show();b.find(".fa-pause").hide()});$(".controls > .fa-play").on("click",function(b){b=$(b.target).closest(".slideshow");b.find(".fa-play").hide();b.find(".fa-pause").show()});$(".controls > .fa-step-backward, .controls > .fa-step-forward").on("click",function(b){b=$(b.target);var a=b.closest(".slideshow");if(!a.hasClass("sliding")){var a=a.find("img:visible"),c=null,c=b.hasClass("fa-step-forward")?a.next("img"):a.prev("img");c[0]&&(a.hide(),c.show())}});
window.setTimeout(d.nextSlide,3E3)};this.nextSlide=function(){$("div.slideshow").addClass("sliding");$("div.slideshow").find("img:visible").each(function(a,b){var c=$(b),d=c.closest(".slideshow");d.find(".fa-play").is(":visible")?d.removeClass("sliding"):c.fadeOut(1100,function(){var a=c.next("img");a[0]||(a=c.parent().find("img:first"));a.fadeIn(700,function(){d.removeClass("sliding")})})});window.setTimeout(d.nextSlide,5E3)};this.init=function(){c()};return this}.apply({});
